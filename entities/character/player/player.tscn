[gd_scene format=3 uid="uid://bciv4ehi025yo"]

[ext_resource type="Script" uid="uid://4opj8a7ja1k4" path="res://entities/character/player/player.gd" id="1_vt0b6"]
[ext_resource type="Shader" uid="uid://c3fsap6t8rhds" path="res://entities/effects/flash.gdshader" id="2_1h0c8"]
[ext_resource type="PackedScene" uid="uid://bjvcrr31ywf8q" path="res://entities/components/hurtbox_component.tscn" id="2_3ekpe"]
[ext_resource type="PackedScene" uid="uid://ccpbqu2hqer7g" path="res://entities/components/velocity_component.tscn" id="2_3hqro"]
[ext_resource type="PackedScene" uid="uid://bsfv6wukonhes" path="res://entities/character/weapon/sword/sword.tscn" id="2_q0c0e"]
[ext_resource type="PackedScene" uid="uid://dld2h07b5m84u" path="res://entities/character/weapon/gun/gun.tscn" id="3_l8lo3"]
[ext_resource type="Texture2D" uid="uid://dmwfumo3ud3b1" path="res://assets/character/player/spr-player-idle-strip06.png" id="3_q0c0e"]
[ext_resource type="PackedScene" uid="uid://dhathox3teks3" path="res://entities/components/health_component.tscn" id="3_rlso7"]
[ext_resource type="PackedScene" uid="uid://mclab3abpbdk" path="res://entities/components/movement_component.tscn" id="5_mbi5q"]
[ext_resource type="PackedScene" uid="uid://slojcui6rutk" path="res://entities/components/knockback_component.tscn" id="6_2oupo"]
[ext_resource type="Script" uid="uid://dk2626lfapnm1" path="res://entities/components/velocity_component.gd" id="7_210l5"]
[ext_resource type="PackedScene" uid="uid://bqxevjcnv8vvf" path="res://ui/hud/hud.tscn" id="12_cr6xo"]
[ext_resource type="Texture2D" uid="uid://l6yxmgiowlwv" path="res://assets/hud/mask/spr-mascara-quebrando10.png" id="13_mpvsy"]
[ext_resource type="Texture2D" uid="uid://diew07r2qug78" path="res://assets/hud/mask/spr-mascara-quebrando20.png" id="14_bcvuw"]
[ext_resource type="Texture2D" uid="uid://ckht75c06q37v" path="res://assets/hud/mask/spr-mascara-quebrando30.png" id="15_rrb68"]
[ext_resource type="AudioStream" uid="uid://dne2giil58hnw" path="res://assets/sound/Hit7.wav" id="16_bl6sn"]
[ext_resource type="Texture2D" uid="uid://bnp0ai8bundw6" path="res://assets/hud/mask/spr-mascara-quebrando40.png" id="16_yjhn8"]
[ext_resource type="AudioStream" uid="uid://n1nkfwdeuemk" path="res://assets/sound/Hit.wav" id="17_3vmqp"]
[ext_resource type="Texture2D" uid="uid://di2s6cl2rhpu" path="res://assets/hud/mask/spr-mascara-linha-100.png" id="17_mpvsy"]
[ext_resource type="Texture2D" uid="uid://b7yw6ksxcgr35" path="res://assets/hud/mask/spr-mascara-quebrando50.png" id="17_ykxus"]
[ext_resource type="Texture2D" uid="uid://cwgv7xbkt3bjp" path="res://assets/hud/mask/spr-mascara-quebrando60.png" id="18_qey6t"]
[ext_resource type="Animation" uid="uid://c46qd3fn0qkp8" path="res://entities/effects/flash.res" id="19_8cih3"]
[ext_resource type="Texture2D" uid="uid://pqp8wxid4mls" path="res://assets/hud/mask/spr-mascara-quebrando70.png" id="19_qqn07"]
[ext_resource type="Texture2D" uid="uid://dt7xu68xy867a" path="res://assets/hud/mask/spr-mascara-quebrando80.png" id="20_djqyg"]
[ext_resource type="Texture2D" uid="uid://fbgefkmnynqd" path="res://assets/hud/mask/spr-mascara-quebrando90.png" id="21_gj0h6"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0lxd0"]
shader = ExtResource("2_1h0c8")
shader_parameter/flash_color = Color(1, 1, 1, 1)
shader_parameter/flash_value = 0.0

[sub_resource type="AtlasTexture" id="AtlasTexture_na8bb"]
atlas = ExtResource("3_q0c0e")
region = Rect2(0, 0, 338, 286)

[sub_resource type="AtlasTexture" id="AtlasTexture_bl6sn"]
atlas = ExtResource("3_q0c0e")
region = Rect2(338, 0, 338, 286)

[sub_resource type="AtlasTexture" id="AtlasTexture_3vmqp"]
atlas = ExtResource("3_q0c0e")
region = Rect2(676, 0, 338, 286)

[sub_resource type="AtlasTexture" id="AtlasTexture_1h0c8"]
atlas = ExtResource("3_q0c0e")
region = Rect2(1014, 0, 338, 286)

[sub_resource type="AtlasTexture" id="AtlasTexture_8cih3"]
atlas = ExtResource("3_q0c0e")
region = Rect2(1352, 0, 338, 286)

[sub_resource type="AtlasTexture" id="AtlasTexture_0lxd0"]
atlas = ExtResource("3_q0c0e")
region = Rect2(1690, 0, 338, 286)

[sub_resource type="SpriteFrames" id="SpriteFrames_2oupo"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_na8bb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bl6sn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3vmqp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1h0c8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8cih3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0lxd0")
}],
"loop": true,
"name": &"idle",
"speed": 14.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vt0b6"]
size = Vector2(70.5, 152.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bmyq4"]
size = Vector2(61, 141)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_1h0c8"]
playback_mode = 1
streams_count = 2
stream_0/stream = ExtResource("16_bl6sn")
stream_1/stream = ExtResource("17_3vmqp")

[sub_resource type="Animation" id="Animation_dwqx1"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:material:shader_parameter/flash_value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nx36u"]
_data = {
&"RESET": SubResource("Animation_dwqx1"),
&"flash": ExtResource("19_8cih3")
}

[node name="Player" type="CharacterBody2D" unique_id=1183110560]
collision_layer = 2
collision_mask = 5
script = ExtResource("1_vt0b6")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="." unique_id=1225882282]
material = SubResource("ShaderMaterial_0lxd0")
position = Vector2(0, -1)
sprite_frames = SubResource("SpriteFrames_2oupo")
animation = &"idle"
autoplay = "idle"
frame_progress = 0.25431708
offset = Vector2(60.57, -11.575)

[node name="Sword" parent="AnimatedSprite2D" unique_id=836343902 instance=ExtResource("2_q0c0e")]
scale = Vector2(2.82, 2.82)

[node name="Gun" parent="AnimatedSprite2D" unique_id=1984785067 instance=ExtResource("3_l8lo3")]
position = Vector2(-52, -54)

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=1944276265]
position = Vector2(4, 44)
shape = SubResource("RectangleShape2D_vt0b6")

[node name="HurtboxComponent" parent="." unique_id=553604298 node_paths=PackedStringArray("health_component", "audio_player", "animation_player") instance=ExtResource("2_3ekpe")]
position = Vector2(-29, -47)
collision_layer = 2
collision_mask = 4
health_component = NodePath("../HealthComponent")
audio_player = NodePath("../AudioStreamPlayer2D")
animation_player = NodePath("../AnimationPlayer")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtboxComponent" unique_id=843075085]
position = Vector2(32.5, 83.5)
shape = SubResource("RectangleShape2D_bmyq4")
debug_color = Color(0.98082143, 0, 0.3804118, 0.41960785)

[node name="HealthComponent" parent="." unique_id=1486431947 instance=ExtResource("3_rlso7")]

[node name="VelocityComponent" parent="." unique_id=416629221 instance=ExtResource("2_3hqro")]
max_speed = 700

[node name="KnockbackComponent" parent="." unique_id=1512948786 node_paths=PackedStringArray("velocity_component") instance=ExtResource("6_2oupo")]
velocity_component = NodePath("VelocityComponent")

[node name="VelocityComponent" type="Node" parent="KnockbackComponent" unique_id=1672530164]
script = ExtResource("7_210l5")
metadata/_custom_type_script = "uid://dk2626lfapnm1"

[node name="MovementComponent" parent="." unique_id=24134777 node_paths=PackedStringArray("velocity_component", "hurtbox_component", "animated_sprite", "knockback_component") instance=ExtResource("5_mbi5q")]
velocity_component = NodePath("../VelocityComponent")
hurtbox_component = NodePath("../HurtboxComponent")
animated_sprite = NodePath("../AnimatedSprite2D")
knockback_component = NodePath("../KnockbackComponent")

[node name="Hud" parent="." unique_id=1615795096 node_paths=PackedStringArray("healthComponent") instance=ExtResource("12_cr6xo")]
health_textures = Array[Texture2D]([ExtResource("13_mpvsy"), ExtResource("14_bcvuw"), ExtResource("15_rrb68"), ExtResource("16_yjhn8"), ExtResource("17_ykxus"), ExtResource("18_qey6t"), ExtResource("19_qqn07"), ExtResource("20_djqyg"), ExtResource("21_gj0h6"), ExtResource("17_mpvsy")])
healthComponent = NodePath("../HealthComponent")

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="." unique_id=137848723]
stream = SubResource("AudioStreamRandomizer_1h0c8")
volume_db = -15.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="." unique_id=1267669980]
libraries/ = SubResource("AnimationLibrary_nx36u")

[connection signal="player_health_changed" from="." to="Hud" method="_on_player_player_health_changed"]
[connection signal="died" from="HealthComponent" to="." method="_on_death"]
[connection signal="health_changed" from="HealthComponent" to="." method="_on_health_changed"]
